{% extends "base.html" %}

{% block title %}Jogo do Bicho - Banca Ferradura{% endblock %}

{% block content %}
<style>
.lottery-container {
  max-width: 400px;
  margin: 0 auto;
  background: #f5f5f5;
  min-height: 100vh;
  position: relative;
  font-family: Arial, sans-serif;
}

.screen {
  display: none;
  width: 100%;
  height: 100vh;
  background: #f5f5f5;
}

.screen.active {
  display: block;
}

.header {
  background: #6c757d;
  color: white;
  padding: 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.back-btn {
  background: none;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
}

.header h1 {
  margin: 0;
  font-size: 18px;
  font-weight: normal;
}

.header-icons {
  display: flex;
  gap: 15px;
}

.content {
  padding: 20px;
}

.option-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  align-items: center;
}

.option-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: white;
  padding: 15px 20px;
  border-radius: 8px;
  cursor: pointer;
  width: 80%;
  max-width: 300px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
}

.option-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.option-icon {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  color: white;
}

.option-icon.green { background: #28a745; }
.option-icon.yellow { background: #ffc107; }
.option-icon.purple { background: #6f42c1; }
.option-icon.pink { background: #e83e8c; }
.option-icon.orange { background: #fd7e14; }
.option-icon.teal { background: #20c997; }

.option-item span {
  font-weight: 500;
  color: #333;
}

.date-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
}

.date-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: white;
  padding: 15px 20px;
  border-radius: 8px;
  cursor: pointer;
  width: 80%;
  max-width: 300px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.date-item:hover {
  background: #f8f9fa;
}

.date-icon {
  font-size: 20px;
  color: #6c757d;
}

.date-info {
  flex: 1;
}

.date-info .date {
  font-weight: 500;
  color: #333;
}

.date-info .day {
  font-size: 12px;
  color: #6c757d;
}

.modalidade-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
  align-items: center;
}

.modalidade-item {
  background: white;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: background 0.2s;
}

.modalidade-item:hover {
  background: #f8f9fa;
}

.colocacao-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.colocacao-item {
  background: white;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.colocacao-item:hover {
  background: #f8f9fa;
}

.colocacao-tag {
  background: #28a745;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
}

.valor-form {
  background: white;
  padding: 20px;
  border-radius: 8px;
  margin-bottom: 20px;
}

.form-group {
  margin-bottom: 15px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: 500;
}

.form-group input {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
}

.valor-buttons {
  display: flex;
  gap: 10px;
  margin: 15px 0;
}

.valor-btn {
  background: #f8f9fa;
  border: 1px solid #ddd;
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.valor-btn:hover {
  background: #e9ecef;
}

.action-buttons {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.btn {
  flex: 1;
  padding: 15px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.btn-primary {
  background: #8b6f47;
  color: white;
}

.btn-primary:hover {
  background: #7a5f3f;
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.loteria-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.loteria-item {
  background: white;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.loteria-item:hover {
  background: #f8f9fa;
}

.loteria-counter {
  background: #6c757d;
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.resumo-aposta {
  background: white;
  padding: 20px;
  border-radius: 8px;
  margin-bottom: 20px;
}

.resumo-header {
  background: #8b6f47;
  color: white;
  padding: 15px;
  border-radius: 8px 8px 0 0;
  text-align: center;
  margin: -20px -20px 20px -20px;
}

.resumo-line {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px dotted #ddd;
}

.resumo-line:last-child {
  border-bottom: none;
  font-weight: bold;
  font-size: 18px;
}

.success-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.success-content {
  background: white;
  padding: 30px;
  border-radius: 12px;
  text-align: center;
  max-width: 300px;
  width: 90%;
}

.success-icon {
  width: 60px;
  height: 60px;
  background: #28a745;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  color: white;
  font-size: 24px;
}

.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  max-width: 400px;
  width: 100%;
  background: #8b6f47;
  padding: 15px;
}

.avancar-btn {
  width: 100%;
  background: #8b6f47;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
}

.avancar-btn:hover {
  background: #7a5f3f;
}
</style>

<div class="lottery-container">
  <!-- Tela 1: Modalidades -->
  <div class="screen active" id="screen-modalidades">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Nova aposta</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list">
        <div class="option-item" onclick="selectModalidade('tradicional')">
          <div class="option-icon green">üçÄ</div>
          <span>TRADICIONAL</span>
        </div>
        <div class="option-item" onclick="selectModalidade('tradicional-1-10')">
          <div class="option-icon green">üçÄ</div>
          <span>TRADICIONAL 1/10</span>
        </div>
        <div class="option-item" onclick="selectModalidade('uruguaia')">
          <div class="option-icon yellow">‚≠ê</div>
          <span>LOT. URUGUAIA</span>
        </div>
        <div class="option-item" onclick="selectModalidade('quininha')">
          <div class="option-icon purple">üíú</div>
          <span>QUININHA</span>
        </div>
        <div class="option-item" onclick="selectModalidade('seninha')">
          <div class="option-icon pink">üíñ</div>
          <span>SENINHA</span>
        </div>
        <div class="option-item" onclick="selectModalidade('super15')">
          <div class="option-icon orange">üß°</div>
          <span>SUPER15</span>
        </div>
        <div class="option-item" onclick="selectModalidade('repetir-pule')">
          <div class="option-icon teal">üíö</div>
          <span>REPETIR PULE</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 2: Data -->
  <div class="screen" id="screen-data">
    <div class="header">
      <button class="back-btn" onclick="goToScreen('screen-modalidades')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Data</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="date-list">
        <div class="date-item" onclick="selectData('04/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-info">
            <div class="date">04/07/2025</div>
            <div class="day">Hoje</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('05/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-info">
            <div class="date">05/07/2025</div>
            <div class="day">S√°bado</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('06/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-info">
            <div class="date">06/07/2025</div>
            <div class="day">Domingo</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('07/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-info">
            <div class="date">07/07/2025</div>
            <div class="day">Segunda</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('08/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-info">
            <div class="date">08/07/2025</div>
            <div class="day">Ter√ßa</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 3: Modalidade do Jogo -->
  <div class="screen" id="screen-modalidade-jogo">
    <div class="header">
      <button class="back-btn" onclick="goToScreen('screen-data')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Modalidade</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="modalidade-grid">
        <div class="modalidade-item" onclick="selectModalidadeJogo('milhar')">MILHAR</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('milhar-inv')">MILHAR INV</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('milhar-e-ct')">MILHAR E CT</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('unidade')">UNIDADE</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('dezena')">DEZENA</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('dezena-esq')">DEZENA ESQ</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('dezena-meio')">DEZENA MEIO</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('duque-dez')">DUQUE DEZ</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('centena')">CENTENA</div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('centena-inv')">CENTENA INV</div>
      </div>
    </div>
  </div>

  <!-- Tela 4: Coloca√ß√£o -->
  <div class="screen" id="screen-colocacao">
    <div class="header">
      <button class="back-btn" onclick="goToScreen('screen-modalidade-jogo')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Coloca√ß√£o</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="colocacao-grid">
        <div class="colocacao-item" onclick="selectColocacao('1-premio')">
          <span>1 PR√äMIO</span>
          <span class="colocacao-tag">Maior pr√™mio</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('1-5-premio')">
          <span>1/5 PR√äMIO</span>
          <span class="colocacao-tag">5x mais chances</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('1-e-1-5-premio')">
          <span>1 E 1/5 PR√äMIO</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('2-premio')">
          <span>2 PR√äMIO</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('3-premio')">
          <span>3 PR√äMIO</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('4-premio')">
          <span>4 PR√äMIO</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('5-premio')">
          <span>5 PR√äMIO</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 5: Valor -->
  <div class="screen" id="screen-valor">
    <div class="header">
      <button class="back-btn" onclick="goToScreen('screen-colocacao')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Valor</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="valor-form">
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
          <div>
            <div style="font-weight: bold;" id="modalidade-display">MILHAR E CT</div>
            <div style="color: #666; font-size: 14px;">Palpites 1</div>
          </div>
          <div style="text-align: right;">
            <div style="font-weight: bold;" id="colocacao-display">1/5 PR√äMIO</div>
            <div style="color: #666; font-size: 14px;">Hoje 04/07/2025</div>
          </div>
        </div>
        
        <div class="form-group">
          <label>Meus Palpites:</label>
          <input type="text" id="palpites-input" placeholder="Digite os n√∫meros" />
        </div>
        
        <div class="form-group">
          <input type="text" id="valor-input" placeholder="R$20,00" />
          <button style="float: right; background: none; border: none; color: #666; cursor: pointer;">Limpar</button>
        </div>
        
        <div class="valor-buttons">
          <button class="valor-btn" onclick="addValor(5)">+5</button>
          <button class="valor-btn" onclick="addValor(20)">+20</button>
          <button class="valor-btn" onclick="addValor(50)">+50</button>
          <button class="valor-btn" onclick="addValor(100)">+100</button>
        </div>
        
        <div class="action-buttons">
          <button class="btn btn-primary">Todos</button>
          <button class="btn btn-primary">Cada</button>
        </div>
      </div>
      
      <div class="action-buttons">
        <button class="btn btn-secondary" onclick="goToScreen('screen-loterias')">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Tela 6: Loterias -->
  <div class="screen" id="screen-loterias">
    <div class="header">
      <button class="back-btn" onclick="goToScreen('screen-valor')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Loterias</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="loteria-list">
        <div class="loteria-item" onclick="toggleLoteria('rio-federal')">
          <span>RIO/FEDERAL</span>
          <span class="loteria-counter">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('maluquinha')">
          <span>MALUQUINHA</span>
          <span class="loteria-counter">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('lotece')">
          <span>LOTECE/LOTEP</span>
          <span class="loteria-counter">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('sao-paulo')">
          <span>SAO-PAULO</span>
          <span class="loteria-counter">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('capital')">
          <span>CAPITAL</span>
          <span class="loteria-counter">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('look-goias')">
          <span>LOOK/GOIAS</span>
          <span class="loteria-counter">0</span>
        </div>
      </div>
      
      <div class="bottom-nav">
        <button class="avancar-btn" onclick="goToScreen('screen-finalizar')">Avan√ßar</button>
      </div>
    </div>
  </div>

  <!-- Tela 7: Finalizar -->
  <div class="screen" id="screen-finalizar">
    <div class="header">
      <button class="back-btn" onclick="goToScreen('screen-loterias')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Finalizar</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="resumo-aposta">
        <div class="resumo-header">
          <div>VENDEDOR: 620500</div>
          <div>04/07/25 12:11:16</div>
        </div>
        
        <div style="text-align: center; margin: 20px 0; font-weight: bold;">
          RESUMO DA APOSTA
        </div>
        
        <div class="resumo-line">
          <span>VALE</span>
          <span>04/07/2025</span>
        </div>
        <div class="resumo-line">
          <span>COTA√á√ÉO</span>
          <span>8M/800C</span>
        </div>
        <div class="resumo-line">
          <span>LT PT RIO 14HS</span>
          <span></span>
        </div>
        <div class="resumo-line">
          <span>MILHAR E CT 1/5 PR√äMIO</span>
          <span></span>
        </div>
        <div class="resumo-line">
          <span>5068</span>
          <span></span>
        </div>
        <div class="resumo-line">
          <span>> 10,00 / CADA</span>
          <span></span>
        </div>
        <div class="resumo-line">
          <span>TOTAL JOGO:</span>
          <span>R$ 10,00</span>
        </div>
        <div class="resumo-line">
          <span>A PAGAR</span>
          <span>R$ 10,00</span>
        </div>
      </div>
      
      <div class="action-buttons">
        <button class="btn btn-primary" onclick="goToScreen('screen-valor')">Voltar as apostas</button>
        <button class="btn btn-secondary" onclick="finalizarAposta()">Finalizar</button>
      </div>
    </div>
  </div>

  <!-- Modal de Sucesso -->
  <div class="success-modal" id="success-modal" style="display: none;">
    <div class="success-content">
      <div class="success-icon">
        <i class="fas fa-check"></i>
      </div>
      <h3>Aposta Realizada com sucesso</h3>
      <button class="btn btn-primary" onclick="novaAposta()">Fechar</button>
    </div>
  </div>
</div>

<script>
// Estado da aplica√ß√£o
let appState = {
  modalidade: '',
  data: '',
  modalidadeJogo: '',
  colocacao: '',
  palpites: '',
  valor: 0,
  loterias: []
};

// Fun√ß√µes de navega√ß√£o
function goToScreen(screenId) {
  // Esconder todas as telas
  document.querySelectorAll('.screen').forEach(screen => {
    screen.classList.remove('active');
  });
  
  // Mostrar tela selecionada
  document.getElementById(screenId).classList.add('active');
}

function goBack() {
  // Implementar l√≥gica de voltar se necess√°rio
  window.history.back();
}

// Fun√ß√µes de sele√ß√£o
function selectModalidade(modalidade) {
  appState.modalidade = modalidade;
  goToScreen('screen-data');
}

function selectData(data) {
  appState.data = data;
  goToScreen('screen-modalidade-jogo');
}

function selectModalidadeJogo(modalidade) {
  appState.modalidadeJogo = modalidade;
  document.getElementById('modalidade-display').textContent = modalidade.toUpperCase();
  goToScreen('screen-colocacao');
}

function selectColocacao(colocacao) {
  appState.colocacao = colocacao;
  document.getElementById('colocacao-display').textContent = colocacao.replace('-', ' ').toUpperCase();
  goToScreen('screen-valor');
}

function addValor(valor) {
  const valorInput = document.getElementById('valor-input');
  const currentValue = parseFloat(valorInput.value.replace('R$', '').replace(',', '.')) || 0;
  const newValue = currentValue + valor;
  valorInput.value = `R$${newValue.toFixed(2).replace('.', ',')}`;
  appState.valor = newValue;
}

function toggleLoteria(loteria) {
  const index = appState.loterias.indexOf(loteria);
  if (index > -1) {
    appState.loterias.splice(index, 1);
  } else {
    appState.loterias.push(loteria);
  }
  
  // Atualizar contador visual
  const counter = document.querySelector(`[onclick="toggleLoteria('${loteria}')"] .loteria-counter`);
  counter.textContent = appState.loterias.includes(loteria) ? '1' : '0';
}

function finalizarAposta() {
  document.getElementById('success-modal').style.display = 'flex';
}

function novaAposta() {
  // Reset do estado
  appState = {
    modalidade: '',
    data: '',
    modalidadeJogo: '',
    colocacao: '',
    palpites: '',
    valor: 0,
    loterias: []
  };
  
  document.getElementById('success-modal').style.display = 'none';
  goToScreen('screen-modalidades');
}

// Inicializa√ß√£o
document.addEventListener('DOMContentLoaded', function() {
  // Garantir que apenas a primeira tela esteja vis√≠vel
  goToScreen('screen-modalidades');
});
</script>
{% endblock %}
