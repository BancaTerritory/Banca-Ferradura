{# Vers√£o 2.0 - Sem SAO-PAULO e CSS Otimizado #}
{% extends "base.html" %}

{% block title %}Jogo do Bicho - Banca Ferradura{% endblock %}

{% block content %}
<style>
.lottery-container {
  max-width: 400px;
  margin: 0 auto;
  background: #f5f5f5;
  min-height: 100vh;
  position: relative;
  font-family: Arial, sans-serif;
}

.screen {
  display: none;
  width: 100%;
  height: 100vh;
  background: #f5f5f5;
}

.screen.active {
  display: block;
}

.header {
  background: #6c757d;
  color: white;
  padding: 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.back-btn {
  background: none;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
}

.header h1 {
  margin: 0;
  font-size: 18px;
  font-weight: normal;
}

.header-icons {
  display: flex;
  gap: 15px;
}

.content {
  padding: 20px;
}

.option-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: center;
}

.option-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  width: 85%;
  max-width: 320px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  color: #333 !important;
  margin: 0 auto 6px auto;
}

.option-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.option-icon {
  width: 35px;
  height: 35px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: white;
}

.option-icon.green { background: #28a745; }
.option-icon.yellow { background: #ffc107; }
.option-icon.purple { background: #6f42c1; }
.option-icon.pink { background: #e83e8c; }
.option-icon.orange { background: #fd7e14; }

.option-text {
  font-weight: 500;
  color: #333 !important;
  font-size: 14px;
}

.date-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  width: 85%;
  max-width: 320px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  margin: 0 auto 6px auto;
}

.date-item:hover {
  transform: translateY(-2px);
}

.date-icon {
  font-size: 18px;
  color: #6c757d;
}

.date-text {
  flex: 1;
}

.date-main {
  font-weight: 500;
  color: #333 !important;
  font-size: 14px;
}

.date-sub {
  font-size: 12px;
  color: #666 !important;
}

.modalidade-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  width: 85%;
  max-width: 320px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  margin: 0 auto 6px auto;
}

.modalidade-item:hover {
  transform: translateY(-2px);
}

.modalidade-text {
  font-weight: 500;
  color: #333 !important;
  font-size: 14px;
}

.modalidade-tag {
  background: #28a745;
  color: white;
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 10px;
}

.colocacao-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  width: 85%;
  max-width: 320px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  margin: 0 auto 6px auto;
}

.colocacao-item:hover {
  transform: translateY(-2px);
}

.colocacao-text {
  font-weight: 500;
  color: #333 !important;
  font-size: 14px;
}

.colocacao-tag {
  background: #28a745;
  color: white;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 10px;
}

.valor-form {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}

.form-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 15px;
}

.form-title {
  font-weight: bold;
  color: #333 !important;
}

.form-date {
  color: #666 !important;
  font-size: 14px;
}

.form-group {
  margin-bottom: 15px;
}

.form-label {
  display: block;
  margin-bottom: 5px;
  color: #333 !important;
  font-weight: 500;
}

.form-input {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
}

.valor-buttons {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.valor-btn {
  background: #f8f9fa;
  border: 1px solid #ddd;
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  color: #333 !important;
}

.valor-btn:hover {
  background: #e9ecef;
}

.action-buttons {
  display: flex;
  gap: 10px;
}

.btn-todos, .btn-cada {
  flex: 1;
  background: #8d6e63;
  color: white;
  border: none;
  padding: 12px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
}

.btn-continuar {
  width: 100%;
  background: #6c757d;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
  margin-top: 10px;
}

.loteria-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  width: 85%;
  max-width: 320px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  margin: 0 auto 6px auto;
}

.loteria-item:hover {
  transform: translateY(-2px);
}

.loteria-text {
  font-weight: 500;
  color: #333 !important;
  font-size: 14px;
}

.loteria-counter {
  background: #6c757d;
  color: white;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
}

.horario-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  width: 85%;
  max-width: 320px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s;
  margin: 0 auto 6px auto;
}

.horario-item:hover {
  transform: translateY(-2px);
}

.horario-radio {
  width: 18px;
  height: 18px;
}

.horario-text {
  flex: 1;
  font-weight: 500;
  color: #333 !important;
  font-size: 14px;
}

.horario-time {
  color: #666 !important;
  font-size: 12px;
}

.btn-avancar {
  width: 85%;
  max-width: 320px;
  background: #8d6e63;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  margin: 20px auto;
  display: block;
}

.resumo-container {
  background: white;
  margin: 20px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.resumo-header {
  background: #6c757d;
  color: white;
  padding: 15px;
  text-align: center;
}

.resumo-content {
  padding: 20px;
}

.resumo-section {
  margin-bottom: 15px;
  padding-bottom: 15px;
  border-bottom: 1px dashed #ddd;
}

.resumo-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.resumo-label {
  font-weight: bold;
  color: #333 !important;
  margin-bottom: 5px;
}

.resumo-value {
  color: #666 !important;
}

.resumo-total {
  background: #f8f9fa;
  padding: 15px;
  margin: 0 -20px -20px -20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.resumo-buttons {
  display: flex;
  gap: 10px;
  margin: 20px;
}

.btn-voltar {
  flex: 1;
  background: #8d6e63;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
}

.btn-finalizar {
  flex: 1;
  background: #6c757d;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
}

.success-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  align-items: center;
  justify-content: center;
}

.success-content {
  background: white;
  padding: 30px;
  border-radius: 8px;
  text-align: center;
  max-width: 300px;
  margin: 20px;
}

.success-icon {
  font-size: 48px;
  color: #28a745;
  margin-bottom: 15px;
}

.success-text {
  font-size: 18px;
  font-weight: 500;
  color: #333 !important;
  margin-bottom: 20px;
}

.btn-fechar {
  background: #8d6e63;
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
}
</style>

<div class="lottery-container">
  <!-- Tela 1: Sele√ß√£o de Modalidades -->
  <div class="screen active" id="screen-modalidades">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Nova aposta</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list">
        <div class="option-item" onclick="selectModalidade('tradicional')">
          <div class="option-icon green">üçÄ</div>
          <span class="option-text">TRADICIONAL</span>
        </div>
        <div class="option-item" onclick="selectModalidade('tradicional-1-10')">
          <div class="option-icon green">üçÄ</div>
          <span class="option-text">TRADICIONAL 1/10</span>
        </div>
        <div class="option-item" onclick="selectModalidade('uruguaia')">
          <div class="option-icon yellow">‚≠ê</div>
          <span class="option-text">LOT. URUGUAIA</span>
        </div>
        <div class="option-item" onclick="selectModalidade('quininha')">
          <div class="option-icon purple">üíú</div>
          <span class="option-text">QUININHA</span>
        </div>
        <div class="option-item" onclick="selectModalidade('seninha')">
          <div class="option-icon pink">üíñ</div>
          <span class="option-text">SENINHA</span>
        </div>
        <div class="option-item" onclick="selectModalidade('super15')">
          <div class="option-icon orange">üß°</div>
          <span class="option-text">SUPER15</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 2: Sele√ß√£o de Data -->
  <div class="screen" id="screen-data">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Data</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list">
        <div class="date-item" onclick="selectData('04/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">04/07/2025</div>
            <div class="date-sub">Hoje</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('05/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">05/07/2025</div>
            <div class="date-sub">S√°bado</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('06/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">06/07/2025</div>
            <div class="date-sub">Domingo</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('07/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">07/07/2025</div>
            <div class="date-sub">Segunda</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('08/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">08/07/2025</div>
            <div class="date-sub">Ter√ßa</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('09/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">09/07/2025</div>
            <div class="date-sub">Quarta</div>
          </div>
        </div>
        <div class="date-item" onclick="selectData('10/07/2025')">
          <div class="date-icon">üìÖ</div>
          <div class="date-text">
            <div class="date-main">10/07/2025</div>
            <div class="date-sub">Quinta</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 3: Modalidade de Jogo -->
  <div class="screen" id="screen-modalidade-jogo">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Modalidade</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list">
        <div class="modalidade-item" onclick="selectModalidadeJogo('milhar')">
          <span class="modalidade-text">MILHAR</span>
          <span class="modalidade-tag">4 n√∫meros</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('centena')">
          <span class="modalidade-text">CENTENA</span>
          <span class="modalidade-tag">3 n√∫meros</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('dezena')">
          <span class="modalidade-text">DEZENA</span>
          <span class="modalidade-tag">2 n√∫meros</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('grupo')">
          <span class="modalidade-text">GRUPO</span>
          <span class="modalidade-tag">1 animal</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('milhar-centena')">
          <span class="modalidade-text">MILHAR E CENTENA</span>
          <span class="modalidade-tag">4 e 3 n√∫meros</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('centena-combinada')">
          <span class="modalidade-text">CENTENA COMBINADA</span>
          <span class="modalidade-tag">3 n√∫meros</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('milhar-combinada')">
          <span class="modalidade-text">MILHAR COMBINADA</span>
          <span class="modalidade-tag">4 n√∫meros</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('dupla-grupo')">
          <span class="modalidade-text">DUPLA DE GRUPO</span>
          <span class="modalidade-tag">2 grupos</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('dupla-dezena')">
          <span class="modalidade-text">DUPLA DE DEZENA</span>
          <span class="modalidade-tag">2 dezenas</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('terno-grupo')">
          <span class="modalidade-text">TERNO DE GRUPO</span>
          <span class="modalidade-tag">3 grupos</span>
        </div>
        <div class="modalidade-item" onclick="selectModalidadeJogo('terno-dezena')">
          <span class="modalidade-text">TERNO DE DEZENA</span>
          <span class="modalidade-tag">3 dezenas</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 4: Coloca√ß√£o -->
  <div class="screen" id="screen-colocacao">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Coloca√ß√£o</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list">
        <div class="colocacao-item" onclick="selectColocacao('1¬∫')">
          <span class="colocacao-text">1¬∫ PR√äMIO</span>
          <span class="colocacao-tag">1¬∫</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('2¬∫')">
          <span class="colocacao-text">2¬∫ PR√äMIO</span>
          <span class="colocacao-tag">2¬∫</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('3¬∫')">
          <span class="colocacao-text">3¬∫ PR√äMIO</span>
          <span class="colocacao-tag">3¬∫</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('4¬∫')">
          <span class="colocacao-text">4¬∫ PR√äMIO</span>
          <span class="colocacao-tag">4¬∫</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('5¬∫')">
          <span class="colocacao-text">5¬∫ PR√äMIO</span>
          <span class="colocacao-tag">5¬∫</span>
        </div>
        <div class="colocacao-item" onclick="selectColocacao('cabe√ßa')">
          <span class="colocacao-text">CABE√áA</span>
          <span class="colocacao-tag">1¬∫ ao 5¬∫</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 5: Valor -->
  <div class="screen" id="screen-valor">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Valor</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="valor-form">
        <div class="form-header">
          <span class="form-title" id="valor-title">MILHAR</span>
          <span class="form-date" id="valor-date">04/07/2025</span>
        </div>
        
        <div class="form-group">
          <label class="form-label">Palpites</label>
          <input type="text" class="form-input" id="palpites-input" placeholder="Digite os n√∫meros">
        </div>
        
        <div class="form-group">
          <label class="form-label">Valor da aposta</label>
          <input type="text" class="form-input" id="valor-input" value="R$ 0,00" readonly>
        </div>
        
        <div class="valor-buttons">
          <button class="valor-btn" onclick="addValor(1)">+R$ 1,00</button>
          <button class="valor-btn" onclick="addValor(2)">+R$ 2,00</button>
          <button class="valor-btn" onclick="addValor(5)">+R$ 5,00</button>
          <button class="valor-btn" onclick="addValor(10)">+R$ 10,00</button>
        </div>
        
        <div class="action-buttons">
          <button class="btn-todos">TODOS</button>
          <button class="btn-cada">CADA</button>
        </div>
        
        <button class="btn-continuar" onclick="goToScreen('screen-loterias')">CONTINUAR</button>
      </div>
    </div>
  </div>

  <!-- Tela 6: Loterias -->
  <div class="screen" id="screen-loterias">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Loterias</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list">
        <div class="loteria-item" onclick="toggleLoteria('rio-federal')">
          <span class="loteria-text">RIO FEDERAL</span>
          <span class="loteria-counter" id="counter-rio-federal">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('maluquinha')">
          <span class="loteria-text">MALUQUINHA</span>
          <span class="loteria-counter" id="counter-maluquinha">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('lotece-lotep')">
          <span class="loteria-text">LOTECE/LOTEP</span>
          <span class="loteria-counter" id="counter-lotece-lotep">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('capital')">
          <span class="loteria-text">CAPITAL</span>
          <span class="loteria-counter" id="counter-capital">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('nacional')">
          <span class="loteria-text">NACIONAL</span>
          <span class="loteria-counter" id="counter-nacional">0</span>
        </div>
        <div class="loteria-item" onclick="toggleLoteria('lt-pt-rio')">
          <span class="loteria-text">LT PT RIO</span>
          <span class="loteria-counter" id="counter-lt-pt-rio">0</span>
        </div>
      </div>
      
      <button class="btn-avancar" onclick="goToScreen('screen-horarios')">AVAN√áAR</button>
    </div>
  </div>

  <!-- Tela 7: Hor√°rios -->
  <div class="screen" id="screen-horarios">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Hor√°rios</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="content">
      <div class="option-list" id="horarios-list">
        <!-- Hor√°rios ser√£o preenchidos dinamicamente -->
      </div>
      
      <button class="btn-avancar" onclick="goToScreen('screen-resumo')">AVAN√áAR</button>
    </div>
  </div>

  <!-- Tela 8: Resumo -->
  <div class="screen" id="screen-resumo">
    <div class="header">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1>Resumo</h1>
      <div class="header-icons">
        <i class="fas fa-eye"></i>
        <i class="fas fa-bars"></i>
      </div>
    </div>
    
    <div class="resumo-container">
      <div class="resumo-header">
        <h2>Resumo da Aposta</h2>
      </div>
      
      <div class="resumo-content">
        <div class="resumo-section">
          <div class="resumo-label">Modalidade:</div>
          <div class="resumo-value" id="resumo-modalidade">-</div>
        </div>
        
        <div class="resumo-section">
          <div class="resumo-label">Data:</div>
          <div class="resumo-value" id="resumo-data">-</div>
        </div>
        
        <div class="resumo-section">
          <div class="resumo-label">Tipo de Jogo:</div>
          <div class="resumo-value" id="resumo-tipo">-</div>
        </div>
        
        <div class="resumo-section">
          <div class="resumo-label">Coloca√ß√£o:</div>
          <div class="resumo-value" id="resumo-colocacao">-</div>
        </div>
        
        <div class="resumo-section">
          <div class="resumo-label">Palpites:</div>
          <div class="resumo-value" id="resumo-palpites">-</div>
        </div>
        
        <div class="resumo-section">
          <div class="resumo-label">Loterias:</div>
          <div class="resumo-value" id="resumo-loterias">-</div>
        </div>
        
        <div class="resumo-section">
          <div class="resumo-label">Hor√°rios:</div>
          <div class="resumo-value" id="resumo-horarios">-</div>
        </div>
      </div>
      
      <div class="resumo-total">
        <strong>Total: <span id="resumo-total">R$ 0,00</span></strong>
      </div>
    </div>
    
    <div class="resumo-buttons">
      <button class="btn-voltar" onclick="goBack()">VOLTAR</button>
      <button class="btn-finalizar" onclick="finalizarAposta()">FINALIZAR</button>
    </div>
  </div>

  <!-- Tela 9: Sucesso -->
  <div class="success-modal" id="success-modal">
    <div class="success-content">
      <div class="success-icon">‚úÖ</div>
      <div class="success-text">Aposta realizada com sucesso!</div>
      <button class="btn-fechar" onclick="fecharModal()">FECHAR</button>
    </div>
  </div>
</div>

<script>
// Vari√°veis globais para armazenar sele√ß√µes
let currentScreen = 'screen-modalidades';
let selectedModalidade = '';
let selectedData = '';
let selectedModalidadeJogo = '';
let selectedColocacao = '';
let selectedPalpites = '';
let selectedValor = 0;
let selectedLoterias = [];
let selectedHorarios = [];

// Hist√≥rico de navega√ß√£o
let screenHistory = ['screen-modalidades'];

// Dados dos hor√°rios por loteria (SEM SAO-PAULO)
const horariosData = {
  "rio-federal": [
    { time: "11:00", name: "RIO FEDERAL" },
    { time: "14:00", name: "RIO FEDERAL" },
    { time: "18:00", name: "RIO FEDERAL" },
    { time: "21:00", name: "RIO FEDERAL" }
  ],
  "maluquinha": [
    { time: "10:00", name: "MALUQUINHA" },
    { time: "15:00", name: "MALUQUINHA" },
    { time: "20:00", name: "MALUQUINHA" }
  ],
  "lotece-lotep": [
    { time: "11:30", name: "LOTECE" },
    { time: "18:30", name: "LOTEP" }
  ],
  "capital": [
    { time: "10:00", name: "CAPITAL" },
    { time: "14:00", name: "CAPITAL" },
    { time: "18:00", name: "CAPITAL" }
  ],
  "nacional": [
    { time: "12:00", name: "NACIONAL" },
    { time: "19:00", name: "NACIONAL" }
  ],
  "lt-pt-rio": [
    { time: "09:00", name: "LT PT RIO" },
    { time: "11:00", name: "LT PT RIO" },
    { time: "18:00", name: "LT PT RIO" }
  ]
};

// Fun√ß√£o para navegar entre telas
function goToScreen(screenId) {
  // Esconder tela atual
  document.querySelector('.screen.active').classList.remove('active');
  
  // Mostrar nova tela
  document.getElementById(screenId).classList.add('active');
  
  // Atualizar hist√≥rico
  screenHistory.push(screenId);
  currentScreen = screenId;
}

// Fun√ß√£o para voltar
function goBack() {
  if (screenHistory.length > 1) {
    screenHistory.pop(); // Remove tela atual
    const previousScreen = screenHistory[screenHistory.length - 1];
    
    // Esconder tela atual
    document.querySelector('.screen.active').classList.remove('active');
    
    // Mostrar tela anterior
    document.getElementById(previousScreen).classList.add('active');
    
    currentScreen = previousScreen;
  }
}

// Fun√ß√µes de sele√ß√£o
function selectModalidade(modalidade) {
  selectedModalidade = modalidade;
  goToScreen('screen-data');
}

function selectData(data) {
  selectedData = data;
  goToScreen('screen-modalidade-jogo');
}

function selectModalidadeJogo(modalidade) {
  selectedModalidadeJogo = modalidade;
  document.getElementById('valor-title').textContent = modalidade.toUpperCase();
  goToScreen('screen-colocacao');
}

function selectColocacao(colocacao) {
  selectedColocacao = colocacao;
  goToScreen('screen-valor');
}

// Fun√ß√£o para adicionar valor
function addValor(valor) {
  selectedValor += valor;
  document.getElementById('valor-input').value = `R$ ${selectedValor.toFixed(2).replace('.', ',')}`;
}

// Fun√ß√£o para toggle de loterias
function toggleLoteria(loteria) {
  const counter = document.getElementById(`counter-${loteria}`);
  const index = selectedLoterias.indexOf(loteria);
  
  if (index === -1) {
    selectedLoterias.push(loteria);
    counter.textContent = '1';
    counter.style.backgroundColor = '#28a745';
  } else {
    selectedLoterias.splice(index, 1);
    counter.textContent = '0';
    counter.style.backgroundColor = '#6c757d';
  }
}

// Fun√ß√£o para carregar hor√°rios
function loadHorarios() {
  const horariosList = document.getElementById('horarios-list');
  horariosList.innerHTML = '';
  
  selectedLoterias.forEach(loteria => {
    if (horariosData[loteria]) {
      horariosData[loteria].forEach(horario => {
        const horarioItem = document.createElement('div');
        horarioItem.className = 'horario-item';
        horarioItem.onclick = () => toggleHorario(loteria, horario.time);
        
        horarioItem.innerHTML = `
          <input type="checkbox" class="horario-radio" id="horario-${loteria}-${horario.time}">
          <span class="horario-text">${horario.name}</span>
          <span class="horario-time">${horario.time}</span>
        `;
        
        horariosList.appendChild(horarioItem);
      });
    }
  });
}

// Fun√ß√£o para toggle de hor√°rios
function toggleHorario(loteria, time) {
  const checkbox = document.getElementById(`horario-${loteria}-${time}`);
  const horarioKey = `${loteria}-${time}`;
  
  if (checkbox.checked) {
    selectedHorarios = selectedHorarios.filter(h => h !== horarioKey);
    checkbox.checked = false;
  } else {
    selectedHorarios.push(horarioKey);
    checkbox.checked = true;
  }
}

// Fun√ß√£o para atualizar resumo
function updateResumo() {
  document.getElementById('resumo-modalidade').textContent = selectedModalidade.toUpperCase();
  document.getElementById('resumo-data').textContent = selectedData;
  document.getElementById('resumo-tipo').textContent = selectedModalidadeJogo.toUpperCase();
  document.getElementById('resumo-colocacao').textContent = selectedColocacao;
  document.getElementById('resumo-palpites').textContent = selectedPalpites || 'N√£o informado';
  document.getElementById('resumo-loterias').textContent = selectedLoterias.join(', ').toUpperCase();
  document.getElementById('resumo-horarios').textContent = selectedHorarios.length + ' hor√°rios selecionados';
  document.getElementById('resumo-total').textContent = `R$ ${selectedValor.toFixed(2).replace('.', ',')}`;
}

// Fun√ß√£o para finalizar aposta
function finalizarAposta() {
  document.getElementById('success-modal').style.display = 'flex';
}

// Fun√ß√£o para fechar modal
function fecharModal() {
  document.getElementById('success-modal').style.display = 'none';
  // Reset do jogo
  location.reload();
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
  // Listener para mudan√ßa de tela de loterias para hor√°rios
  const originalGoToScreen = goToScreen;
  goToScreen = function(screenId) {
    if (screenId === 'screen-horarios') {
      loadHorarios();
    } else if (screenId === 'screen-resumo') {
      updateResumo();
    }
    originalGoToScreen(screenId);
  };
  
  // Listener para input de palpites
  const palpitesInput = document.getElementById('palpites-input');
  if (palpitesInput) {
    palpitesInput.addEventListener('input', function() {
      selectedPalpites = this.value;
    });
  }
});
</script>

{% endblock %}

